## 什么是HBase
1. HBase一个分布式的基于列式存储的数据库,基于hadoop的hdfs存储，zookeeper进行管理。
2. HBase为null的数据不会被存储
3. HBase适合存储半结构化或非结构化数据

## HBase的数据模型
可以把hbase理解为一个多维的map

#### rowkey
行健其实就是hbase表的主键

#### column family
列族，每个列族可以细分出多个列

#### timestamp
版本号，每次修改列族的值不是在原来的基础上修改，而是会重新复制一份记录，然后在复制出来的记录上修改。原来的记录会以某一种版本的形式记录下来。

当我们去读数据的时候默认是将最新的时间戳这个记录读取出来，不是把所有时间戳的数据都读出来。

## HBase有什么缺点
单一rowkey固有的局限性决定了它不可能有效地支持多条件查询
不直接支持sql的语句查询

## rowkey的设计
1. 散列性：相似的rowkey聚合，相异的rowkey分散，有利于查询
2. 简短性：过长增加存储压力
3. 唯一性：必须唯一（如果查询条件多，那么rowkey的设计就应该支持多条件查询）

## hbase如何防止热点问题
hbase通过row key来定位数据行，当rowkey设计不当的时候，大量的请求会访问hbase的少数几个节点，造成hbase region server读写请求过多，负载过大，引起性能下降，导致系统不可用。所以我们需要把rowkey尽量均衡的分散到不同的region，可以使用前缀取hashcode然后mod机器数。