## 优化方向
1. 将请求尽量拦截在系统上游，不要让锁冲突落到数据库上去。
2. 充分利用缓存，这是典型的读多写少场景。

## 各层优化细节

### 客户端怎么优化
1. 点查询后按钮置为灰色，禁止用户重复提交请求。
2. JS层面，限制用户X秒之内只能提交一次请求。

### web层请求拦截
JS可以拦截普通用户，但是拦截不了程序员。
所以我们可以在web应用层通过uid计数，比如5秒内只通过一个请求

### 服务层拦截
对于写请求(下订单)，使用请求队列，只通过有限的请求到DB，例如1万步手机，只通过1万个下单请求到DB。
对于读请求，使用redis做缓存。

### 数据库层
此时DB已经没有压力了。

## 秒杀系统如何解决超卖问题
1. 数据库层面设置库存字段不能为负数（无符号整数）
2. update时使用case when判断语句来确保不会减成负数

